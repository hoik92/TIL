# 05. 이진 탐색

## 1. 이진 탐색 알고리즘

> 정렬되어 있는 배열에서 특정한 데이터를 찾아내는 알고리즘

1. 정렬된 배열에서 가운데에 위치한 값을 타겟과 비교한다.
2. 가운데 값이 타겟보다 크면 가운데 값을 제외한 왼쪽의 배열에서 다시 가운데 값을 설정한다.
3. 가운데 값이 타겟보다 작으면 가운데 값을 제외한 오른쪽의 배열에서 다시 가운데 값을 설정한다.
4. 위를 반복하여 비교한 값이 타겟값과 같으면 이를 리턴한다.

```c++
int binarySearch(int arr[], int target, int s, int e) {
	int m;
	while (s <= e) {
		m = (s + e) / 2;
		if (arr[m] == target) return m;
		else if (arr[m] > target) e = m - 1;
		else s = m + 1;
	}
	return -1;
}
```



## 2. 이진 탐색 트리(Binary Search Tree)

> 왼쪽 자식 노드는 부모보다 작고 오른쪽 자식 노드는 부모보다 큰 값을 가지는 이진 트리

시간 복잡도

- 균형 트리: O(logn)
- 불균형 트리: O(n)

탐색

- 루트 노드부터 타겟 값과 비교한다.
- 타겟값이 루트 노드의 값보다 크면 오른쪽 자식 노드와 비교한다.
- 타겟값이 루트 노드의 값보다 작으면 왼쪽 자식 노드와 비교한다.
- 위를 반복한다.

삽입

- 루트 노드부터 삽입 값과 비교한다.
- 삽입 값이 현재 노드의 값보다 크고 오른쪽 자식 노드가 있는 경우 오른쪽 자식 노드로 이동한다.
- 삽입 값이 현재 노드의 값보다 작고 왼쪽 자식 노드가 있는 경우 왼쪽 자식 노드로 이동한다.
- 위를 반복하며 자식 노드가 없는 위치에 삽입 값을 가지는 노드를 생성한다.

삭제

- 삭제할 노드가 잎 노드인 경우
  - 해당 노드를 삭제한다.
- 삭제할 노드가 하나의 자식 노드를 가진 경우
  - 삭제할 노드의 자식 노드와 삭제할 노드의 부모 노드를 연결하고 노드를 삭제한다.
- 삭제할 노드가 두 개의 자식 노드를 가진 경우
  - 해당 노드를 삭제한다.
  - 왼쪽 자식 노드에 대한 트리에서의 최대값 또는 오른쪽 자식 노드에 대한 트리에서의 최소값을 삭제된 노드의 자리로 이동시킨다.
  - 옮겨진 노드는 삭제된 것과 마찬가지이므로 위의 세가지 경우에 대해 반복하여 트리를 정리한다.

### 이진 탐색 VS 이진 탐색 트리

- 근본적으로 같은 원리에 의한 탐색 구조
- 이진 탐색은 배열에 저장된 데이터를 탐색
  - 동적으로 크기가 변하는 데이터 집합 탐색에는 부적합
  - 삽입과 삭제가 힘들다.
- 이진 탐색 트리는 연결 리스트 데이터에 대한 탐색
  - 비교적 빠른 시간 안에 삽입과 삭제가 가능하다.
- 삽입, 삭제가 빈번히 이루어진다면 이진 탐색 트리를 사용해야 한다.



## 3. 레드 블랙 트리(Red-Black Tree)

> 이진 탐색 트리에서의 최악의 탐색 시간 복잡도는 O(n)이다.
>
> 이 경우는 부모 노드는 하나의 자식 노드만을 가지게 된 경우에 나타나는데, 이를 균형 잡힌 이진 탐색 트리로 만들기 위한 과정이다.

조건

- 모든 노드는 빨강 or 검정이다.
- 루트 노드는 검정이다.
- 모든 리프 노드는 검정이다.
- 빨강 노드의 자식은 검정이다.(== 빨강 노드가 연속될 수 없다.)
  - 검정 노드의 자식은 빨강 or 검정이다.
- 루트 노드에서 모든 잎 노드 사이에 있는 검정 노드의 개수는 동일하다.

회전

- 좌회전
  - 부모 노드의 오른쪽 자식 노드를 부모 노드의 위치로 옮긴다.
  - 부모 노드를 오른쪽 자식 노드의 왼쪽 자식 노드 위치로 옮긴다.
  - 오른쪽 자식 노드의 왼쪽 자식 노드를 부모 노드의 오른쪽 자식 노드 위치로 옮긴다.
- 우회전
  - 부모 노드의 왼쪽 자식 노드를 부모 노드의 위치로 옮긴다.
  - 부모 노드를 왼쪽 자식 노드의 오른쪽 자식 노드 위치로 옮긴다.
  - 왼쪽 자식 노드의 오른쪽 자식 노드를 부모 노드의 왼쪽 자식 노드 위치로 옮긴다.

삽입

- 삽입하고자 하는 값을 빨강 노드로 하여 우선 삽입한다.(O(logn))
- 삽입된 노드의 부모 노드가 검정일 경우
  - pass
- 삽입된 노드의 부모 노드가 빨강이고 삼촌 노드가 빨강일 경우
  - 부모 노드와 삼촌 노드를 검정으로 바꾸고 할아버지 노드를 빨강으로 바꾼다.
  - 조건에 어긋나지 않을 때까지 반복한다.
- 삽입된 노드의 부모 노드가 빨강이고 삼촌 노드가 검정일 경우
  - 삽입된 노드가 부모 노드의 오른쪽 자식 노드일 경우
    - 삽입된 노드와 부모 노드를 기준으로 좌회전한다.
    - 아래의 과정을 수행한다.
  - 삽입된 노드가 부모 노드의 왼쪽 자식 노드일 경우
    - 부모 노드를 검정, 할아버지 노드를 빨강으로 바꾼다.
    - 부모 노드와 할아버지 노드를 기준으로 우회전한다.

삭제

- 이진 탐색 트리와 마찬가지의 방법으로 삭제할 노드를 찾아 삭제한다.

- 삭제할 노드가 빨강일 경우

  - pass

- 삭제할 노드가 검정일 경우

  - 그 자리를 대체하는 노드를 검정으로 바꾼다.

  - 대체하는 노드가 빨강이었을 경우

    - pass

  - 대체하는 노드가 검정이었을 경우(이중흑색노드)

    - CASE Change(이중흑색노드의 형제 노드가 빨강일 경우)

      - 형제 노드를 검정, 부모 노드를 빨강으로 바꾼다.
      - 형제 노드와 부모 노드를 기준으로 회전한다.

      - 다음의 CASE를 수행한다.

    - CASE A(이중흑색노드의 형제 노드가 검정이고 형제의 양쪽 자식 노드가 검정일 경우)

      - 형제 노드를 빨강으로 바꾸고 이중흑색노드의 검정을 부모 노드로 옮긴다.
      - 부모 노드가 이중흑색노드가 될 경우 CASE를 반복한다.

    - CASE B(이중흑색노드의 형제 노드가 검정이고 형제의 왼쪽 자식이 빨강, 오른쪽 자식이 검정일 경우)

      - 형제 노드를 빨강, 형제 노드의 왼쪽 자식을 검정으로 바꾼다.
      - 형제 노드와 형제 노드의 왼쪽 자식 노드를 기준으로 우회전한다.

    - CASE C(이중흑색노드의 형제 노드가 검정이고 형제의 오른쪽 자식이 빨강일 경우)

      - 형제 노드의 색을 부모 노드의 색으로 바꾼다.
      - 부모 노드, 형제 노드의 오른쪽 자식을 검정으로 바꾼다.
      - 부모 노드와 형제 노드를 기준으로 회전한다.