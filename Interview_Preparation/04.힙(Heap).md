# 힙(Heap)

> 완전 이진 트리의 한 종류로 우선 순위 큐에 적합한 자료구조

우선 순위 큐: 우선 순위가 높은 데이터가 가장 먼저 빠지는 자료구조(작업 스케줄링)

- 우선 순위 큐는 배열, 연결 리스트, 힙으로 구현할 수 있다.

|                       | 삽입    | 삭제    |
| --------------------- | ------- | ------- |
| 순서 없는 배열        | O(1)    | O(n)    |
| 순서 없는 연결 리스트 | O(1)    | O(n)    |
| 정렬된 배열           | O(n)    | O(1)    |
| 정렬된 연결 리스트    | O(n)    | O(1)    |
| 힙                    | O(logn) | O(logn) |

특징

- 힙은 여러 개의 값들 중에서 최대값이나 최소값을 빠르게 찾아내도록 만들어진 자료구조이다.

- 힙은 일종의 반정렬 상태(느슨한 정렬 상태)를 유지한다.
- 힙 트리에서는 중복된 값을 허용한다.(이진 탐색 트리는 중복을 허용하지 않는다.)

종류

- 최대 힙(Max Heap)
  - 부모 노드의 키 값이 자식 노드의 키 값보다 크거나 같은 완전 이진 트리
  - key(부모 노드) >= key(자식 노드)
- 최소 힙(Min Heap)
  - 부모 노드의 키 값이 자식 노드의 키 값보다 작거나 같은 완전 이진 트리
  - key(부모 노드) <= key(자식 노드)



### 힙의 구현

배열

- 배열의 첫 번째 인덱스 0은 사용하지 않는다.
- 루트 노드의 인덱스는 1이며 특정 위치의 노드 번호는 변하지 않는다.
- 부모 자식 관계
  - 왼쪽 자식의 인덱스 = 부모의 인덱스 * 2
  - 오른쪽 자식의 인덱스 = 부모의 인덱스 * 2 + 1
  - 부모의 인덱스 = 자식의 인덱스 / 2

삽입

- 새로운 요소가 입력되면 일단 새로운 노드를 힙의 마지막 노드에 이어 삽입한다.
- 새로운 노드를 부모 노드와 비교하며 힙의 성질을 만족시킨다.

삭제

- 최대힙에서 최대값은 루트 노드이므로 루트 노드가 삭제된다.
- 삭제된 루트 노드에는 힙의 마지막 노드를 가져온다.
- 힙을 재구성한다.

```c++
class Heap {
private:
	int heap[200];
	int last;

public:
	Heap() {
		last = 0;
	}
	void insert(int item) {
		int i = ++last;
		heap[i] = item;
		while (i != 1 && heap[i] > heap[i / 2]) {
			int tmp = heap[i];
			heap[i] = heap[i / 2];
			heap[i / 2] = tmp;
			i /= 2;
		}
	}
	int remove() {
		int result = heap[1];
		heap[1] = heap[last--];
		int i = 1;
		while (i * 2 <= last) {
			int child = i * 2;
			if (child < last && heap[child] < heap[child + 1]) {
				child++;
			}
			if (heap[child] > heap[i]) {
				int tmp = heap[i];
				heap[i] = heap[child];
				heap[child] = tmp;
				i = child;
				child *= 2;
			}
		}
		return result;
	}
};
```

